run = "bash start.sh"
entrypoint = "backend/app/main.py"

[nix]
channel = "stable-24_05"

[deployment]
build = ["sh", "-c", "cd frontend && npm install && npm run build"]
run = ["sh", "-c", "cd backend && python3 -m uvicorn app.main:app --host 0.0.0.0 --port $PORT"]
deploymentTarget = "cloudrun"

[[ports]]
localPort = 8000
externalPort = 80

[env]
PYTHONUNBUFFERED = "1"
